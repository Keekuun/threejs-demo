<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>图片上传</title><style>*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background-color:#f8f8f8;color:#333;line-height:1.5;padding:20px;-webkit-tap-highlight-color:transparent}.container{max-width:100%;margin:0 auto}h1{font-size:22px;margin-bottom:20px;text-align:center;color:#333}.upload-section{background-color:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 10px rgba(0,0,0,.05);margin-bottom:20px}.paste-area{text-align:center;border:2px dashed #07c160;border-radius:8px;padding:20px;margin-bottom:20px;position:relative}.paste-area.active{background-color:rgba(7,193,96,.05);border-color:#06ad56}.paste-icon{font-size:48px;color:#07c160;margin-bottom:15px}.paste-text{font-size:16px;color:#333;margin-bottom:8px;font-weight:500}.paste-hint{font-size:14px;color:#999;margin-bottom:0}.or-divider{display:flex;align-items:center;margin:20px 0;color:#999;font-size:14px}.or-divider::after,.or-divider::before{content:"";flex:1;height:1px;background:#eee}.or-divider::before{margin-right:15px}.or-divider::after{margin-left:15px}.btn{display:inline-block;background-color:#07c160;color:#fff;border:none;padding:12px 24px;border-radius:25px;font-size:16px;font-weight:500;cursor:pointer;width:100%;transition:background-color .2s;-webkit-appearance:none}.btn:active{background-color:#06ad56}.btn:disabled{background-color:#ccc;cursor:not-allowed}.btn-secondary{background-color:#f5f5f5;color:#666;margin-top:10px}.btn-secondary:active{background-color:#e5e5e5}.preview-container{display:none;margin-top:20px;text-align:center;position:relative}.preview-image{max-width:100%;max-height:300px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.file-info{margin-top:15px;font-size:14px;color:#666;text-align:left;background-color:#f5f5f5;padding:12px;border-radius:8px}.file-info strong{color:#333}.delete-btn{position:absolute;top:-10px;right:-10px;width:30px;height:30px;background-color:#ff4d4f;color:#fff;border-radius:50%;border:none;font-size:16px;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,.2);z-index:1}.delete-btn:active{background-color:#d9363e}.hidden-input{display:none}.toast{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:rgba(0,0,0,.7);color:#fff;padding:12px 20px;border-radius:4px;font-size:14px;z-index:1000;display:none}.loading{display:none;margin:20px auto;width:30px;height:30px;border:3px solid rgba(7,193,96,.2);border-radius:50%;border-top-color:#07c160;animation:spin 1s ease-in-out infinite}@keyframes spin{to{transform:rotate(360deg)}}</style></head><body><div class="container"><h1>图片上传</h1><div class="upload-section"><div class="paste-area" id="pasteArea"><div class="paste-icon">📋</div><div class="paste-text">长按此区域粘贴图片</div><div class="paste-hint">从相册复制图片后，在此处长按选择"粘贴"</div></div><div class="or-divider">或</div><button id="selectBtn" class="btn">选择图片</button> <input type="file" id="fileInput" class="hidden-input" accept="image/*"></div><div class="preview-container" id="previewContainer"><button class="delete-btn" id="deleteBtn">×</button> <img id="previewImage" class="preview-image" src="" alt="预览"><div class="file-info" id="fileInfo"></div></div><div class="loading" id="loading"></div><button id="uploadBtn" class="btn" disabled>上传图片</button> <button id="cancelBtn" class="btn btn-secondary" disabled>取消</button></div><div class="toast" id="toast"></div><script>const pasteArea=document.getElementById("pasteArea"),fileInput=document.getElementById("fileInput"),selectBtn=document.getElementById("selectBtn"),previewContainer=document.getElementById("previewContainer"),previewImage=document.getElementById("previewImage"),fileInfo=document.getElementById("fileInfo"),uploadBtn=document.getElementById("uploadBtn"),cancelBtn=document.getElementById("cancelBtn"),deleteBtn=document.getElementById("deleteBtn"),loading=document.getElementById("loading"),toast=document.getElementById("toast");let longPressTimer,currentFile=null;function showToast(e,t=2e3){toast.textContent=e,toast.style.display="block",setTimeout((()=>{toast.style.display="none"}),t)}const LONG_PRESS_DURATION=300;function handleFile(e){if(!e.type.match("image.*"))return void showToast("请选择图片文件");if(e.size>5242880)return void showToast("图片大小不能超过5MB");currentFile=e,loading.style.display="block";const t=new FileReader;t.onload=t=>{previewImage.src=t.target.result,previewContainer.style.display="block",fileInfo.innerHTML=`\n          <strong>文件名:</strong> ${e.name}<br>\n          <strong>类型:</strong> ${e.type}<br>\n          <strong>大小:</strong> ${formatFileSize(e.size)}\n        `,uploadBtn.disabled=!1,cancelBtn.disabled=!1,loading.style.display="none"},t.onerror=()=>{showToast("图片读取失败"),loading.style.display="none"},t.readAsDataURL(e)}function formatFileSize(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}function resetUploader(){currentFile=null,previewImage.src="",previewContainer.style.display="none",fileInput.value="",uploadBtn.disabled=!0,cancelBtn.disabled=!0,loading.style.display="none"}pasteArea.addEventListener("touchstart",(e=>{longPressTimer=setTimeout((()=>{pasteArea.classList.add("active"),showToast('请选择"粘贴"选项')}),300)})),pasteArea.addEventListener("touchend",(e=>{clearTimeout(longPressTimer),pasteArea.classList.remove("active")})),pasteArea.addEventListener("touchmove",(e=>{clearTimeout(longPressTimer),pasteArea.classList.remove("active")})),selectBtn.addEventListener("click",(()=>{fileInput.click()})),fileInput.addEventListener("change",(e=>{e.target.files.length>0&&handleFile(e.target.files[0])})),document.addEventListener("paste",(e=>{if(e.clipboardData&&e.clipboardData.items)for(let t=0;t<e.clipboardData.items.length;t++){const n=e.clipboardData.items[t];if(-1!==n.type.indexOf("image")){const e=n.getAsFile();handleFile(new File([e],`pasted-image-${Date.now()}.${e.type.split("/")[1]||"png"}`,{type:e.type})),showToast("已粘贴图片");break}}})),deleteBtn.addEventListener("click",resetUploader),cancelBtn.addEventListener("click",resetUploader),uploadBtn.addEventListener("click",(()=>{currentFile&&(loading.style.display="block",uploadBtn.disabled=!0,cancelBtn.disabled=!0,setTimeout((()=>{loading.style.display="none",showToast("上传成功"),console.log("上传文件:",currentFile),setTimeout(resetUploader,1e3)}),1500))})),showToast("支持粘贴图片或手动选择图片上传",3e3)</script></body></html>