<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Canvas 图形拖拽缩放</title></head><style>#chart-wrap{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}</style><body><canvas id="myCanvas"></canvas><script>function Circle(t,e,c){this.x=t,this.y=e,this.r=c,this.draw=function(){ctx.beginPath(),ctx.arc(this.x,this.y,this.r,0,2*Math.PI),ctx.fillStyle="red",ctx.fill()}}function Rectangle(t,e,c,s){this.x=t,this.y=e,this.w=c,this.h=s,this.draw=function(){ctx.beginPath(),ctx.rect(this.x,this.y,this.w,this.h),ctx.fillStyle="blue",ctx.fill()}}function Line(t,e,c,s){this.x1=t,this.y1=e,this.x2=c,this.y2=s,this.draw=function(){ctx.beginPath(),ctx.moveTo(this.x1,this.y1),ctx.lineTo(this.x2,this.y2),ctx.strokeStyle="black",ctx.stroke()}}function init(){canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),canvas.addEventListener("wheel",scrollFunc,!1),canvas.addEventListener("mousemove",moveFunc,!1)}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),this.scale=ctx.getTransform().scaleX,0==type&&new Circle(100,100,50).draw(),1==type&&new Rectangle(100,100,100,100).draw(),2==type&&new Line(100,100,200,200).draw()}function scrollFunc(t){t.preventDefault(),console.log("scrollFunc",t),t.wheelDelta>0?scale+=.1:scale-=.1,ctx.setTransform(scale,1,1,scale,0,0),draw()}function moveFunc(t){x=t.clientX-offsetX,y=t.clientY-offsetY,offsetX=x-x/scale*scale,offsetY=y-y/scale*scale,ctx.setTransform(scale,1,1,scale,offsetX,offsetY),draw()}init();var type=0;function drawShape(){++type>2&&(type=0),draw()}drawShape()</script></body></html>